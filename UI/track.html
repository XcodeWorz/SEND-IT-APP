<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>WELCOME | SEND-IT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="courier, shipping, delivery">
    <link rel="stylesheet" type="text/css" media="screen" href="./CSS/main.css" />
    <link href="https://fonts.googleapis.com/css?family=Black+Han+Sans|Francois+One|Playfair+Display+SC|Teko|Ubuntu|Noto+Sans+TC" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">
</head>
<body>
    <header>
        <div class = 'container'>
            <div class = 'site-logo'>
                <a href= ''><h1>SeNd It</h1>....<i class="fas fa-shipping-fast fa-2x"></i>  </a>
                <i id="fast-reliable" style="color: white;">fast, reliable, efficient</i>
            </div>
           
            <div class= 'account', id = "account">
            </div>
           
        </div>
    </header>
    <div id="map"></div>
    <div id="result"></div>
    <script>
        const mapContainer = document.getElementById('map');
        const urlParams = new URLSearchParams(window.location.search);
        const presentLocation = urlParams.get('presentLocation');


        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: {lat: 40.72, lng: -73.96}
            });
            const infoWindow = new google.maps.InfoWindow;
            const geocoder = new google.maps.Geocoder;

            document.addEventListener('DOMContentLoaded', () => {
                loadMap(map, infoWindow, geocoder);
            })
        }
    
        function loadMap(map, geocoder, infoWindow) {
            geocoder.geocode({address: presentLocation}, (result, status) => {
                if(status !== 'OK') {
                    console.log(`Geocode was not successful for the following reason: ${status}`);
                    return;    
                }

                map.setZoom(10);
                map.setCenter(result.geometry[0].location);

                const marker = new google.maps.Marker({
                    map: map,
                    position: result[0].geometry.location
                });

                infoWindow.setContent(result[0].formatted_address);
                infoWindow.open(map, marker);
                
            })
        }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAJ9zoRhXuWGy6HN1cR_9wPz15MywBDkbg&callback=initMap">
    </script>
    <script src="scripts/main.js"></script>
</body>
</html>